legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill='white'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill='white', color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "black"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=45, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=45, hjust=1, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=45, hjust=1, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 15),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=45, hjust=1, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 40),
plot.background = element_rect(fill="green"),
panel.background = element_rect(fill="red", color="black"),
panel.grid.major = element_line(colour = "red"),
panel.grid.minor = element_line(colour = "purple"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "orange", color = "black"),
strip.text = element_text(size = 15, color="red"),
legend.background = element_rect(fill="black"),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 40),
plot.background = element_rect(fill="green"),
panel.background = element_rect(fill="red", color="black"),
panel.grid.major = element_line(colour = "red"),
panel.grid.minor = element_line(colour = "purple"),
title = element_text(size = 1),
axis.line.x = element_line(colour = "black"),
axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "orange", color = "black"),
strip.text = element_text(size = 15, color="red"),
legend.background = element_rect(fill="black"),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
element_rect(fill="red", color="black")
######################
# Colors (RColorBrewer)
#####################
#http://colorbrewer2.org/
library(RColorBrewer)
display.brewer.all(n=NULL, type="all", select=NULL, exact.n=TRUE,colorblindFriendly=TRUE)
mypalette<-brewer.pal(4,"Greens")
ggplot(data=abird,
aes(x=state,
y=samplesize,
fill=state)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
ggplot(data=yearly_sex_counts,
aes(x=state,
y=samplesize,
fill=state)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
ggplot(data=yearly_sex_counts,
aes(x=year,
y=n,
fill=sex)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
View(yearly_sex_counts)
ggplot(data=yearly_sex_counts,
aes(x=species,
y=n,
fill=sex)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
ggplot(data=yearly_sex_counts,
aes(x=species_id,
y=n,
fill=sex)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
ggplot(data=yearly_sex_counts,
aes(x=species_id,
y=n,
fill=species_id)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
View(yearly_sex_counts)
yearly_sex_counts <- surveys_complete %>%
group_by(species_id,sex,year) %>% count() %>%
select(species_id %in% c("DM","NL","OT"))
surveys_complete %>%
group_by(species_id,sex,year) %>% count()
yearly_sex_counts <- surveys_complete %>%
group_by(species_id,sex,year) %>% count() %>%
filter(species_id %in% c("DM","NL","OT"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=45, hjust=1, color = "black"),
axis.text.y = element_text(size = 2, color = "darkgray"),
axis.title.y = element_text(size = 20),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white", color="black"),
panel.grid.major = element_line(colour = "darkgray"),
panel.grid.minor = element_line(colour = "darkgray"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "lightgray", color = "black"),
strip.text = element_text(size = 15, color="black"),
legend.background = element_rect(fill=NULL, color = 'black'),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
View(surveys_complete)
yearly_sex_counts <- surveys_complete %>%
group_by(species_id,sex,year) %>% count() %>%
filter(species_id %in% c("DM","NL","OT","PB"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 40),
plot.background = element_rect(fill="green"),
panel.background = element_rect(fill="red", color="black"),
panel.grid.major = element_line(colour = "red"),
panel.grid.minor = element_line(colour = "purple"),
title = element_text(size = 1),
#        axis.line.x = element_line(colour = "black"),
#        axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "orange", color = "black"),
strip.text = element_text(size = 15, color="red"),
legend.background = element_rect(fill="black"),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x = year,
y = n,
group=sex, color=sex)) +
geom_line() +
facet_wrap(~species_id, ncol=2)+
ylab("Life Expectancy")+
theme(axis.text.x = element_text(size = 15, ang=90, color = "purple"),
axis.text.y = element_text(size = 2, color = "red"),
axis.title.y = element_text(size = 40),
plot.background = element_rect(fill="green"),
panel.background = element_rect(fill="red", color="black"),
panel.grid.major = element_line(colour = "red"),
panel.grid.minor = element_line(colour = "purple"),
title = element_text(size = 1),
axis.line.x = element_line(colour = "black"),
axis.line.y = element_line(colour = "black"),
strip.background = element_rect(fill = "orange", color = "black"),
strip.text = element_text(size = 15, color="red"),
legend.background = element_rect(fill="black"),
legend.text = element_text(color="gray"),
legend.key=element_rect(fill="white"))
ggplot(data=yearly_sex_counts,
aes(x=species_id,
y=n,
fill=species_id)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
mypalette<-brewer.pal(4,"Set2")
mypalette[2] <- "#000000"
ggplot(data=abird,
aes(x=state,
y=samplesize,
fill=state)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
ggplot(data=yearly_sex_counts,
aes(x=species_id,
y=n,
fill=species_id)) +
geom_boxplot()+
ggtitle("TITLE HERE")+
xlab("text here")+
ylab("text here") +
scale_fill_manual(values=mypalette)
setwd('/home/matt/r_programs/Hendrix_2020')
# Introduction to R
## Why use R?
# www.github.com/embruna/refsplitr
library(refsplitr)
read_references('archive/BITR', dir=T)
references_read('archive/BITR', dir=T)
references <- references_read('archive/BITR', dir=T)
authors <- authors_clean(references)
View(references)
references <- references_read('archive/BITR', dir=T)
authors <- authors_clean(references)
authors <- authors_refine(authors$review, authors$prelim, sim_score = 0.9)
?paste
?paste0
x <- 'matt'
paste0('hello','my','name','is',x)
paste('hello','my','name','is',x)
paste0('hello')
paste('hello','world')
paste0('hello','world')
paste0('hello',' world')
paste('hello','world',sep='-')
paste('hello','world','my name is',sep=' ')
paste('hello','world','my name is',x,sep=' ')
#This becomes useful when you add in dynamic variables
i <- 'the best'
paste0('i am ',i)
state <- 'AZ'
paste0('myfiles_',state,'.csv')
state <- c('AZ','TX')
paste0('myfiles_',state,'.csv')
extension <- 'final1'
# Lets read our cleaned data set from yesterday, and remind ourselves what it looks like
surveys_complete <- read.csv("surveys_complete.csv")
head(surveys_complete)
str(surveys_complete)
# 1. Lets start by remaking our data table counting the amount of species caught per year per sex
species_counts <- surveys_complete %>% group_by(species_id,year,sex) %>% count()
# 2. To add another layer, lets see if theres any species that were not caught very often and we can filter out
species_counts %>% group_by(species_id,sex) %>% tally(n)
select_species <- species_counts %>% group_by(species_id) %>% tally(n) %>% filter(n>200)
for(i in select_species$species_id){
#select the species and make a temporary data frame for the loop
data_tmp <- species_counts %>% filter(species_id==i)
#ggplot code (in slightly different syntax than before) that plots points and lines for each state
#describe the data.frame and aesthetics
p <- ggplot(data_tmp, aes(x = year, y = n, group = sex, color = sex))
#then add the individual plots and graphics commands to that general ggplot fxn
p <- p + geom_point() + geom_line() + ggtitle(i)
p
#save the figure using the paste function that we talked about earlier
ggsave(file = paste0(i, '_ByYearBySex','.png'), device = 'png', dpi = 300)
}
# Apply
set.seed(1234)
dat <- rnorm(100)
dat <- matrix(rnorm(100), nrow=10, ncol=10)
apply(data, 1, sum)
apply(dat, 1, sum)
apply(dat, 2, sum)
temp_to_c <- function(temp_values, input_temp="F"){
if(input_temp=="F"){
newtemps <-  f_to_c(temp_values)}
if(input_temp=="K"){newtemps <- temp_values - 273.15}
if(input_temp=="C"){newtemps <- temp_values}
return(newtemps)
}
apply(dat, 1, temp_to_c, input_temp='C')
dat <- matrix(rnorm(100,mean=10), nrow=10, ncol=10)
View(dat)
dat <- matrix(rnorm(100,mean=10, sd=5), nrow=10, ncol=10)
View(dat)
dat <- matrix(rnorm(100,mean=10, sd=50), nrow=10, ncol=10)
View(dat)
dat <- matrix(rnorm(100,mean=20, sd=50), nrow=10, ncol=10)
dat <- matrix(rnorm(100,mean=20, sd=10), nrow=10, ncol=10)
dat <- matrix(rnorm(100,mean=20, sd=40), nrow=10, ncol=10)
View(dat)
dat <- matrix(rnorm(100,mean=50, sd=40), nrow=10, ncol=10)
View(dat)
apply(dat, 1, temp_to_c, input_temp='C')
f_to_c <- function(temp_values){
(temp_values - 32) * 5/9
}
dat <- matrix(rnorm(100,mean=50, sd=40), nrow=10, ncol=10)
View(dat)
apply(dat, 1, temp_to_c, input_temp='C')
apply(dat, 1, f_to_c)
View(dat)
tt <- apply(dat, 1, f_to_c)
View(tt)
f_to_c(10)
f_to_c(32)
tt <- apply(dat, 1, f_to_c)
View(tt)
tt <- apply(dat, 2, f_to_c)
View(tt)
